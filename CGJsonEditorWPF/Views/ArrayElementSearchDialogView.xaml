<editor:CustomWindow x:Class="CG.Test.Editor.Views.ArrayElementSearchDialogView"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     xmlns:local="clr-namespace:CG.Test.Editor.Views" 
                     xmlns:modelsnodes="clr-namespace:CG.Test.Editor.Models.Nodes"
                     xmlns:viewmodels="clr-namespace:CG.Test.Editor.ViewModels"
                     xmlns:editor="clr-namespace:CG.Test.Editor" 
                     xmlns:system="clr-namespace:System;assembly=mscorlib"
                     mc:Ignorable="d"
        Title="Search Array Element" Height="450" Width="400" WindowStartupLocation="CenterScreen">
    <Window.DataContext>
        <viewmodels:ArrayElementSearchViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <editor:IsNullConverter x:Key="IsNullConverter"/>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>

        <ToolBar Grid.Row="0">
            <TextBlock Text="Search Element: " FontSize="14" VerticalAlignment="Center"/>
            <TextBox Margin="5" MinWidth="280" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Stretch"/>
        </ToolBar>

        <ListView Grid.Row="1" Margin="5" ItemsSource="{Binding Elements}" SelectedItem="{Binding SelectedNode}" Resources="{StaticResource TopLevel}"/>

        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" 
                    Content="Navigate"
                    Margin="5, 5, 2.5, 5"
                    IsDefault="True" 
                    CommandParameter="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}, Mode=FindAncestor}}"
                    Command="{Binding NavigateCommand}">
                <Button.IsEnabled>
                    <Binding Path="SelectedNode" Converter="{StaticResource IsNullConverter}">
                        <Binding.ConverterParameter>
                            <system:Boolean>False</system:Boolean>
                        </Binding.ConverterParameter>
                    </Binding>
                </Button.IsEnabled>
            </Button>
            <Button Grid.Column="1" Content="Cancel" Margin="2.5, 5, 5, 5" IsCancel="True"/>
        </Grid>
    </Grid>
</editor:CustomWindow>
