<frontend:CustomWindow x:Class="CG.Test.Editor.FrontEnd.Views.Dialogs.ReferencePickerDialog"
					   xmlns:frontend="clr-namespace:CG.Test.Editor.FrontEnd"
					   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
					   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
					   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
					   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
					   xmlns:local="clr-namespace:CG.Test.Editor.FrontEnd.Views.Dialogs" 
					   xmlns:viewmodelnodes="clr-namespace:CG.Test.Editor.FrontEnd.ViewModels.Nodes" 
					   xmlns:converters="clr-namespace:CG.Test.Editor.FrontEnd.Converters"
					   mc:Ignorable="d"
					   Title="Select node to reference" 
					   Height="720" Width="1280"
					   WindowStartupLocation="CenterScreen"
					   DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">
	<Window.Resources>
		<converters:IsNotNullConverter x:Key="IsNotNullConverter"/>
	</Window.Resources>
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="0.5*"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>

		<TreeView Grid.Column="0" Margin="5, 5, 2.5, 5" ItemsSource="{Binding Root.Children}" MinWidth="200" SelectedItemChanged="TreeView_SelectedItemChanged">
			<TreeView.ItemTemplate>
				<HierarchicalDataTemplate ItemsSource="{Binding Children}">
					<TextBlock Text="{Binding Name}"/>
				</HierarchicalDataTemplate>
			</TreeView.ItemTemplate>
		</TreeView>
		<Grid Grid.Column="1">
			<Grid.RowDefinitions>
				<RowDefinition Height="auto"/>
				<RowDefinition Height="*"/>
			</Grid.RowDefinitions>

			<ToolBar Grid.Row="0">
				<Button x:Name="_moveBackButton" Margin="5, 5, 2.5, 5"   Content="&#xe72b;" FontFamily="{StaticResource SymbolFont}"
						IsEnabled="{Binding IsBackButtonEnabled}" Click="MoveBackButton_Click"/>
				<Button x:Name="_moveForwardButton" Margin="2.5, 5, 2.5, 5" Content="&#xe72a;" FontFamily="{StaticResource SymbolFont}" 
						IsEnabled="{Binding IsForwardButtonEnabled}" Click="MoveForwardButton_Click"/>
				
				<Separator/>
				
				<Button x:Name="_moveUpButton" Margin="2.5, 5, 2.5, 5" Content="&#xe74a;" FontFamily="{StaticResource SymbolFont}" Click="MoveUpButton_Click" 
						IsEnabled="{Binding Current.Parent, Converter={StaticResource IsNotNullConverter}}"/>
				
				<Separator/>

				<ItemsControl ItemsSource="{Binding AddressItems}">
					<ItemsControl.ItemsPanel>
						<ItemsPanelTemplate>
							<StackPanel Orientation="Horizontal"/>
						</ItemsPanelTemplate>
					</ItemsControl.ItemsPanel>
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Button Content="{Binding Name}" Margin="2.5, 5, 2.5, 5"/>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</ToolBar>

			<ContentControl Grid.Row="1" Content="{Binding Current}">
				<ContentControl.Resources>
					<DataTemplate DataType="{x:Type viewmodelnodes:ArrayNodeViewModel}">
						<Grid>
							<Grid.RowDefinitions>
								<RowDefinition Height="auto"/>
								<RowDefinition Height="*"/>
							</Grid.RowDefinitions>
							<ScrollViewer Grid.Row="1">
								<Grid>
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="auto"/>
										<ColumnDefinition Width="*"/>
									</Grid.ColumnDefinitions>

									<ListView Grid.Column="0" Margin="2.5, 5, 5, 5" IsEnabled="False" 
														  ItemsSource="{Binding Indices}" 
														  Background="Transparent" 
														  BorderBrush="Transparent" 
														  SelectionMode="Multiple">
										<ListView.ItemTemplate>
											<DataTemplate>
												<Grid>
													<Grid.ColumnDefinitions>
														<ColumnDefinition Width="auto"/>
														<ColumnDefinition Width="auto"/>
														<ColumnDefinition Width="auto"/>
													</Grid.ColumnDefinitions>
													<TextBlock FontFamily="Cascadia Mono" Grid.Column="0" VerticalAlignment="Center" Text="["/>
													<TextBlock FontFamily="Cascadia Mono" Grid.Column="1" VerticalAlignment="Center" Text="{Binding}"/>
													<TextBlock FontFamily="Cascadia Mono" Grid.Column="2" VerticalAlignment="Center" Text="]: "/>
												</Grid>
											</DataTemplate>
										</ListView.ItemTemplate>
									</ListView>
									<ListView x:Name="_listView" Grid.Column="1" Margin="2.5, 5, 5, 5" SelectionMode="Single"
											  ItemsSource="{Binding Elements}" Resources="{StaticResource NodeCompactDataTemplates}">
										<ListView.ItemContainerStyle>
											<Style TargetType="{x:Type ListViewItem}" BasedOn="{StaticResource {x:Type ListViewItem}}">
												<Setter Property="VerticalContentAlignment" Value="Center"/>
												<Setter Property="VerticalAlignment" Value="Center"/>
												<EventSetter Event="MouseDoubleClick" Handler="ArrayViewItem_MouseDoubleClick"/>
											</Style>
										</ListView.ItemContainerStyle>
									</ListView>
								</Grid>
							</ScrollViewer>
						</Grid>
					</DataTemplate>
					<DataTemplate DataType="{x:Type viewmodelnodes:ObjectNodeViewModel}">
						<ListView ItemsSource="{Binding Nodes}" SelectionMode="Single">
							<ListView.ItemContainerStyle>
								<Style TargetType="{x:Type ListViewItem}" BasedOn="{StaticResource {x:Static GridView.GridViewItemContainerStyleKey}}">
									<Setter Property="VerticalContentAlignment" Value="Center"/>
									<Setter Property="VerticalAlignment" Value="Center"/>
									<EventSetter Event="MouseDoubleClick" Handler="ObjectViewItem_MouseDoubleClick"/>
								</Style>
							</ListView.ItemContainerStyle>
							<ListView.View>
								<GridView>
									<GridView.Columns>
										<GridViewColumn Header="Property Name">
											<GridViewColumn.CellTemplate>
												<DataTemplate>
													<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
														<TextBlock VerticalAlignment="Center" FontFamily="Cascadia Mono" 
																			   FontWeight="Bold" FontSize="16" Text="{Binding Key}"/>
														<TextBlock VerticalAlignment="Center" FontFamily="Cascadia Mono" 
																			   FontWeight="Bold" FontSize="16" Text=": "/>
													</StackPanel>
												</DataTemplate>
											</GridViewColumn.CellTemplate>
										</GridViewColumn>
										<GridViewColumn Header="Value">
											<GridViewColumn.CellTemplate>
												<DataTemplate>
													<ContentControl VerticalAlignment="Center" Content="{Binding Value}" 
																				Resources="{StaticResource NodeCompactDataTemplates}"/>
												</DataTemplate>
											</GridViewColumn.CellTemplate>
										</GridViewColumn>
									</GridView.Columns>
								</GridView>
							</ListView.View>
						</ListView>
					</DataTemplate>
				</ContentControl.Resources>
			</ContentControl>
		</Grid>
	</Grid>
</frontend:CustomWindow>
